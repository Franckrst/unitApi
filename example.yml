---
# */15 * * * 1-5 mkdir -p /var/log/unitApiMonitor/ap1; unitTest ./example.yml > /var/log/unitApiMonitor/ap1/$(date +'%d/%m/%Y')/$(date +'%T').json

config:
  baseURL: http://local.api.bouyguestelecom.fr
  headers:
    x-version: '2'
    banc-b2r: ap1
    x-banc: local
    Content-Type: application/json
    x-oauth2-usertype: CDV
  checkBDD:
    mysql:
      host: "127.0.0.1"
      user: "bytel"
      password: "bytel"
      database: "bytel"
      overSSH:
        username: "vagrant"
        host: "local.bouyguestelecom.fr"
        privateKey: "/Users/franck/boutique/puphpet/files/dot/ssh/id_rsa"
groupe:
- name: Commande Simple
  test:
  #https://jsonplaceholder.typicode.com/posts
  - title: "- PlaceHolder test"
    baseURL: "https://jsonplaceholder.typicode.com"
    method: "get"
    url: "/posts"
    capture:
      - json: "0.userId"
        as: panierID
      - json: "1.id"
        as: panierID2
    checkBDD:
        query:
          - sql: "SELECT COUNT(role_id) AS count FROM admin_role WHERE role_id = 1;"
            result:
              - count: 2
    checkJSON:
      - userId: "@{Number}"
- name: Commande Simple
  test:
  #https://jsonplaceholder.typicode.com/posts
  - title: "- PlaceHolder taaaaaaest"
    baseURL: "https://jsonplaceholder.typicode.com"
    method: "get"
    url: "/posts"
    capture:
      - json: "0.userId"
        as: panierID
      - json: "1.id"
        as: panierID2
    checkBDD:
        query:
          - sql: "SELECT COUNT(role_id) AS count FROM admin_role WHERE role_id = 1;"
            result:
              - count: 1
    checkJSON:
      - userId: "@{Number}"